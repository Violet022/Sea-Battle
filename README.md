# Sea-Battle
## Краткое описание
Проект представляет собой веб-версию игры “Морской бой” с такими модификациями как:
- возможность выбора размера поля;
- возможность выбора одного из трех уровней сложности, в зависимости от которого будут использоваться разные алгоритмы ведения игры и расстановки кораблей противника на поле.

Основные задачи проекта:
- изучение работы с системой контроля версий, а именно:
  - написание осмысленных заголовков и описаний коммитов
  - работа с ветками, их слияние и разрешение возникающих конфликтов
- изучение работы с системой управления проектами Redmine, а именно:
  - постановка задач
  - фиксирование затраченного на выполнение задачи времени
  - ведение документации, описывающей проект, в Wiki

Работа над проектом велась командой из трех человек, ознакомиться с процессом выполнения проекта можно по следующей ссылке на историю коммитов репозитория, использовавшегося командой: https://github.com/AnnaEgorycheva/SeaBattle/network 

## Описание модификаций
1.  Уровень сложности<br>
В зависимости от уровня сложности выбирается алгоритм ведения игры противником, то есть меняется точность попадания в корабли пользователя, сложность расположения кораблей противника. В игре представлены три уровня:
    - Легкий.<br>На данном уровне используется алгоритм произвольной расстановки кораблей без каких-либо закономерностей. Выстрелы противником делаются  рандомно.
    - Средний.<br>На данном уровне корабли расставляются согласно более сложным схемам, чем на легком уровне. Выстрелы делаются по одному из нескольких алгоритмов, однако при попадании в цель дальнейшие выстрелы противником осуществляются рандомно (то есть при попадании в конкретную клетку, дальнейшие выстрелы для потопления раненого корабля будут осуществляться по четырем соседним клеткам).
    - Сложный.<br>На данном уровне корабли расставляются согласно сложным схемам. Выстрелы делаются по одному из нескольких алгоритмов, и при попадании в цель дальнейшие выстрелы противником будут на поражение (то есть при попадании в конкретную клетку противник сразу же определяет расположение всего корабля и обстреливает его).
2.  Размер поля<br>У пользователя будет возможность выбрать один из трех возможных размеров поля: 10х10, 15х15, 20х20, в зависимости от которого будет меняться количество кораблей.<br> На момент завершения проекта данный пункт не был реализован, пользователю доступен только размер 10х10. 

## Требования
#### Функциональные требования:
- Пользователь может начать новую игру.
- Пользователь может выбрать один из нескольких уровней сложности.
- Пользователь должен иметь возможность расставить корабли вручную.
- Пользователь должен иметь возможность расставить корабли автоматически в произвольном порядке.
- Система должна генерировать расположение кораблей противника в зависимости от уровня сложности.
- Для разных уровней сложности должны быть реализованы разные алгоритмы ведения игры противником.
- Пользователь может завершить игру в любой момент времени.

#### Модель предметной области
Как можно увидеть на модели предметной области в игре существуют два вида игрока: сам пользователь, который заходит на сайт и запрограммированный противник, в дальнейшем реализованный в виде объекта класса Enemy, имеющего доступ к методам, описывающим алгоритмы ведения боя. 
![Модель ПРо](https://github.com/Violet022/Sea-Battle/assets/80825993/84a077d2-3cc2-45e7-b492-f06e2c530875)<br>
_Рисунок 1 - Модель предметной области_

#### Диаграмма классов
![Диаграмма классов](https://github.com/Violet022/Sea-Battle/assets/80825993/49330f35-504b-4fd6-ba6f-33817c3f6f41)<br>
_Рисунок 2 - Диаграмма классов_

## Структура приложения
Данное веб-приложение представляет собой многостраничный сайт, состоящий из четырех страниц: главня, страница настроек, страница расстановки пользователем кораблей, страница ведения игрового боя.
В ходе выполнения работы я занималась версткой первых двух страниц, написанием алгоритмов генерации расстановки кораблей противника на поле разных уровней сложности, механизмом сохранения данных о состоянии игры (выбранный уровень сложности и размер поля, расстановка кораблей противника) для их использования на странице ведения игры.

### Главная страница (/pages/StartPage.html)
На рисунке 3 представлен внешний вид главной страницы приложения, на которой пользователь может увидеть логотип игры, приветственную надпись, кнопку для перехода на страницу настроек. Кроме этого, пользователь может ознакомиться с правилами игры, если ему это требуется, кликнув на соответствующий текст.

![MainPage](https://github.com/Violet022/Sea-Battle/assets/80825993/896a8000-7323-4c7d-b356-5686319f9e4e)<br>
_Рисунок 3.1 - Главная страница_

![MainPageWithRules](https://github.com/Violet022/Sea-Battle/assets/80825993/af8a2eb4-8400-4b30-8299-0d8340e7f911)<br>
_Рисунок 3.2 - Главная страница с развернутыми правилами игры_

### Страница настроек (/pages/SettingsPage.html)
Данная страница позволяет пользователю выбрать сложность игры, размер поля и после, нажав соответствующую кнопку, перейти к расстановке своих кораблей.
Необходимо отметить, что до перенаправления на следующую страницу выполняются следующие действия:
- в localStorage сохраняется выбранный пользователем уровень в виде пары ключ ('level') - значение ('easy', 'medium' или 'hard');
- в localStorage сохраняется выбранный пользователем размер поля в виде пары ключ ('fieldSize') - значение ('ten', 'fifteen' или 'twenty');
- на основании выбранного уровня произвольным образом выбирается один из представленных алгоритмов расстановки кораблей, соответствующий этому уровню, после чего с помощью вызова функции getShipsLocation() с передачей алгоритма в виде параметра генерируется расстановка кораблей противника, которая также сохраняется в localStorage с ключом 'enemyField'.

![ChooseALevelPage_light](https://github.com/Violet022/Sea-Battle/assets/80825993/151d1078-aaf7-4754-ac46-009ccf728cff)<br>
_Рисунок 4 - Страница настроек_

![EasyLevelPlacement](https://github.com/Violet022/Sea-Battle/assets/80825993/aaa6818d-d326-46c8-8040-ed8f6081b101)<br>
_Рисунок 5 - Демонстрация состояния localStorage после перехода на страницу расстановки кораблей_

### Алгоритмы расстановки кораблей на поле
Код функций и других вспомогательных структур, описывающих алгоритмы, используемые для генерации расстановки кораблей, расположен в файле 'js/ships_location_algorithms.js'.
В общей сумме в проекте используется 8 алгоритмов расстановок кораблей, поделенных по сложности. В основе каждого из них лежит "Алгоритм произвольной расстановки", друг от друга их отличают дополнительные ограничения при расстановке.

#### Легкий уровень
Легкому уровню соответствует один алгоритм: "Алгоритм произвольной расстановки", результатом применения которого является расстановка, не имеющая никаких закономерностей или других ограничений, отличных от базовых, характерных для игры: между кораблями должна быть как минимум одна свободная клетка, корабли не могут соприкасаться друг с другом.

![Easy](https://github.com/Violet022/Sea-Battle/assets/80825993/016dbef8-9dc1-42b3-817b-664e49df561b)<br>
_Рисунок 6 - Иллюстрация расстановки, выполненной с использованием "Алгоритма произвольной расстановки"_

![EnemyEasyPlacement](https://github.com/Violet022/Sea-Battle/assets/80825993/2fc8ff37-8b9d-475f-8322-d2bc60212d3c)<br>
_Рисунок 7 - Визуализация расстановки кораблей противника, выполненной с использованием "Алгоритма произвольной расстановки" в виде двумерного массива, получаемого из объекта enemyField_

#### Средний уровень
Среднему уровню соответствуют 2 алгоритма:

**"Диагонали"**<br>Ограничения, накладываемые алгоритмом: избегание диагоналей, то есть ни одна палуба ни одного коробля не может находится на клетке, лежащей на одной из диагоналей, проходящей через центр поля.

**"Берега"**<br>Ограничения, накладываемые алгоритмом: все корабли флота располагаются по краям поля.

![Medium](https://github.com/Violet022/Sea-Battle/assets/80825993/2184b4f0-17f1-4a3b-9972-38c11f17ceb2)<br>
_Рисунок 8 - Иллюстрация расстановок, выполненных с использованием алгоритмов среднего уровня_

![MiddleLevel](https://github.com/Violet022/Sea-Battle/assets/80825993/0a6664aa-1dc6-4c15-a38b-e1a57558cada)<br>
_Рисунок 9 - Визуализация расстановки кораблей противника, выполненной с использованием алгоритма среднего уровня, в виде двумерного массива, получаемого из объекта enemyField_

#### Сложный уровень
Сложному уровню соответствуют 3 алгоритма:

**"Берега (усложненная версия)"**<br>
Ограничения, накладываемые алгоритмом: все корабли флота, кроме однопалубных, располагаются по краям поля.
![Hard_1](https://github.com/Violet022/Sea-Battle/assets/80825993/6ebdba21-2294-4244-bdb0-23304349eb73)<br>
_Рисунок 10 - Иллюстрация расстановки, выполненной с использованием алгоритма "Берега (усложненная версия)"_

**"Половина поля (по горизонтали)"**<br>
Принцип работы алгоритма: поле делится по горизонтали на две половины, на одной из них располагаются однопалубные корабли, на второй - все остальные.
![Hard_2](https://github.com/Violet022/Sea-Battle/assets/80825993/c765c05e-21d6-47c2-b599-ab3ded5aba1a)<br>
_Рисунок 11 - Иллюстрация расстановки, выполненной с использованием алгоритма "Половина поля (по горизонтали)", две вариации_

**"Половина поля (по вертикали)"**<br>
Принцип работы алгоритма: поле делится по вертикали на две половины, на одной из них распологаются однопалубные корабли, на второй - все остальные.
![Hard_3](https://github.com/Violet022/Sea-Battle/assets/80825993/a3e2bf9a-5e23-41fe-a11c-84dcab23c711)<br>
_Рисунок 12 - Иллюстрация расстановки, выполненной с использованием алгоритма "Половина поля (по вертикали)", две вариации_

![HardLevel](https://github.com/Violet022/Sea-Battle/assets/80825993/7b66ce43-c942-4f1d-a5ac-c89f4ba41fb3)<br>
_Рисунок 13 - Визуализация расстановки кораблей противника, выполненной с использованием рандомно выбранного алгоритма сложного уровня, в виде двумерного массива, получаемого из объекта enemyField_

### Страница расстановки кораблей (/pages/ShipPlacementPage.html)
Данная страница позволяет пользователю двумя способами расставить корабли на свое поле: перетаскиванием кораблей вручную на поле, меняя при необходимости ориентацию двойным кликом по ним, или нажатием на кнопку авто, которая сгенерирует произвольную расстановку, используя алгоритм легкого уровня.

![ShipPlacementPage](https://github.com/Violet022/Sea-Battle/assets/80825993/71f9c6c0-282f-4f22-8d42-d4c46f31e344)<br>
_Рисунок 14 - Вид страницы расстановки кораблей при открытии_

![ShipPlacementPageManual](https://github.com/Violet022/Sea-Battle/assets/80825993/108ac44a-3d9d-42d6-9f9e-63ed5f4b9d96)<br>
_Рисунок 15.1 - Расстановка пользователем кораблей перетаскиванием_

![ShipPlacementPageAuto](https://github.com/Violet022/Sea-Battle/assets/80825993/7f2335eb-0f42-425c-9d7e-3916fe3436aa)<br>
_Рисунок 15.2 - Автоматическая расстановка пользователем кораблей_

### Страница ведения игрового боя (/pages/gamePage.html)
Страница, на которую попадает пользователь после настройки игры, и на которой происходит сам бой пользователя и противника согласно правилам, указанным на главной странице.

![GamePage](https://github.com/Violet022/Sea-Battle/assets/80825993/d29b5f53-ed24-4a91-8e65-3a18a4385982)<br>
_Рисунок 16 - Вид страницы игрового боя при открытии_

![GamePageGame](https://github.com/Violet022/Sea-Battle/assets/80825993/6050d899-e317-4518-9771-09a96bd00818)<br>
_Рисунок 17 - Демонстрация вида игровых полей в течение игры_

Как было упомянуто ранее, от выбранного уровня сложности зависит и то, какой алгоритм будет использовать противник при ведении боя. На рисунке 17 невозможно проследить никакой закономерности в выстрелах, так как изначально пользователь выбрал легкий уровень сложности, согласно которому выстрелы противника произвольны. Тем не менее, на рисунке 18 ниже, уровень сложности игры на котором сложный, прослеживается закономерность выстрелов: они идут по диагоналям.
![HardLevelGaming](https://github.com/Violet022/Sea-Battle/assets/80825993/bb0a8a01-0c61-4512-93f8-c7ee29983497)<br>
_Рисунок 18 - Демонстрация применения некоторого алгоритма противником при ведении боя_

Также согласно требованиям посльзователь может завершить игру при своем желании нажав соответствующую кнопку и подтвердив свой выбор.
![EndTheGame](https://github.com/Violet022/Sea-Battle/assets/80825993/b6f78a32-8d25-4e95-8b19-1882625302cf)<br>
_Рисунок 19 - Завершение игры_
